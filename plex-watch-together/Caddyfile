# Main application
plexwatch.duckdns.org {
    reverse_proxy localhost:3001
    
    encode gzip zstd
    
    header {
        Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
        X-Content-Type-Options "nosniff"
        X-Frame-Options "SAMEORIGIN"
        X-XSS-Protection "1; mode=block"
        Referrer-Policy "strict-origin-when-cross-origin"
        -Server
        -X-Powered-By
    }
    
    log {
        output file ./logs/caddy-access.log
        format json
    }
}

# HTTP redirect
plexwatch.duckdns.org:80 {
    redir https://{host}{uri} permanent
}
